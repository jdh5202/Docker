FROM httpd:2.4

# SSL 인증서 및 개인 키 복사
COPY ./scripts/apache.crt /usr/local/apache2/conf/server.crt
COPY ./scripts/apache.key /usr/local/apache2/conf/server.key

# SSL 모듈 및 구성 활성화
RUN sed -i 's/#LoadModule ssl_module modules\/mod_ssl.so/LoadModule ssl_module modules\/mod_ssl.so/' /usr/local/apache2/conf/httpd.conf
RUN sed -i 's/#Include conf\/extra\/httpd-ssl.conf/Include conf\/extra\/httpd-ssl.conf/' /usr/local/apache2/conf/httpd.conf

# SSL 구성 파일 복사
COPY ./scripts/my-httpd-ssl.conf /usr/local/apache2/conf/extra/httpd-ssl.conf

# SSL 포트 노출
EXPOSE 443
