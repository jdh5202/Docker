# PHP 5.6과 Apache를 사용하는 기본 이미지
FROM php:5.6-apache

# SSL 모듈 활성화
RUN a2enmod ssl

# 기본 포트 설정
EXPOSE 443

# SSL 관련 파일 복사 (이 부분에서 실제 SSL 인증서와 키 파일을 사용해야 함)
COPY ./scripts/apache.crt /etc/apache2/ssl/server.crt
COPY ./scripts/apache.key /etc/apache2/ssl/server.key

# Apache SSL 설정 파일 수정
RUN echo '<VirtualHost *:443> \n\
    SSLEngine on \n\
    SSLCertificateFile /etc/apache2/ssl/server.crt \n\
    SSLCertificateKeyFile /etc/apache2/ssl/server.key \n\
    SSLProtocol all -SSLv2 -TLSv1.3 \n\
</VirtualHost>' > /etc/apache2/sites-available/default-ssl.conf

# SSL 사이트 활성화
RUN a2ensite default-ssl
