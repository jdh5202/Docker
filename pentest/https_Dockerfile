FROM php:7.4-apache

# 필요한 PHP 확장 설치
RUN docker-php-ext-install mysqli pdo pdo_mysql

# SSL 인증서 및 개인 키 복사
COPY ./scripts/apache.crt /etc/ssl/certs/
COPY ./scripts/apache.key /etc/ssl/private/

# Apache SSL 구성 파일 복사 및 활성화
COPY ./scripts/my-httpd-ssl.conf /etc/apache2/sites-available/
RUN a2enmod ssl && \
    a2ensite my-httpd-ssl && \
    service apache2 restart

# SSL 포트 노출
EXPOSE 443
